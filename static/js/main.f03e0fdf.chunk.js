(this["webpackJsonpreact-test"]=this["webpackJsonpreact-test"]||[]).push([[0],{20:function(e,t,a){},33:function(e){e.exports=JSON.parse('["Abia","Adamawa","Akwa Ibom","Anambra","Bauchi","Bayelsa","Benue","Borno","Cross River","Delta","Ebonyi","Edo","Ekiti","Enugu","FCT - Abuja","Gombe","Imo","Jigawa","Kaduna","Kano","Katsina","Kebbi","Kogi","Kwara","Lagos","Nasarawa","Niger","Ogun","Ondo","Osun","Oyo","Plateau","Rivers","Sokoto","Taraba","Yobe","Zamfara"]')},36:function(e,t,a){e.exports=a(56)},41:function(e,t,a){},56:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),r=a(15),o=a.n(r),l=a(22),c=(a(41),a(5)),i=a(6),p=a(13),u=a(11),m=a(12),d=a(17),h=(a(20),a(4)),f=a.n(h),y=a(14),b=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(p.a)(this,Object(u.a)(t).call(this,e))).next=function(){a.props.history.push("/ff-survey/Select",{stations:a.state.stations})},a.get=Object(y.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("http://192.168.43.94:8000/api/pioneer/6.601838-3.351486",{headers:{Accept:"application/json, text/plain, */*","Content-Type":"application/json"}});case 3:return e.next=5,e.sent.json();case 5:t=e.sent,a.setState({stations:t}),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),alert(e.t0),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,9]])}))),a.locate=Object(y.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!navigator.geolocation){e.next=5;break}return e.next=3,navigator.geolocation.getCurrentPosition((function(e,t){}));case 3:e.next=6;break;case 5:alert("Please use a different browser or try a different browser");case 6:case"end":return e.stop()}}),e)}))),a.state={stations:[]},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return s.a.createElement("div",{className:"App",style:{display:"flex",justifyContent:"center",alignItems:"center"}},s.a.createElement("div",{className:"main"},s.a.createElement("div",{style:{width:"100%",display:"flex",flexDirection:"row",justifyContent:"space-between"}},s.a.createElement("h1",{className:""},"Welcome")),s.a.createElement("div",{style:{height:"1px",background:"var(--Color3)"}}),s.a.createElement("h3",null,"Hello,"),s.a.createElement("p",null,"Thanks so much for agreeing to help out with this survey"),s.a.createElement("p",null,"This would help ensure the prices of fuel are as low as possible especially during these complex periods"),s.a.createElement("p",null,'Thanks once again, please Click "Next" to continue'),s.a.createElement("button",{onClick:this.next},"Next")))}}]),t}(n.Component),g=a(16),E=a(23),v=(a(2),a(19)),O=a(33),w=a(18);a(32);function k(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}var C=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?k(a,!0).forEach((function(t){Object(g.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):k(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},{base_url:"https://fuel-finder-001.herokuapp.com"}),x=Object(v.c)({accessToken:"pk.eyJ1IjoibmFwcHMtbmJpIiwiYSI6ImNqcXpsNHI5ZDBlYmMzeG52NzJ6YWlxcXMifQ.z0APpgMYfKagA9LNS7McYQ"}),j=function(e){var t,a=e.stations,n=e.selected,r=e.selectFunc,o=e.reff;return void 0==a||(t=a.map((function(e,t){var a=t,l=e,c=n.id===e.id,i={key:e.id,onClick:function(e){r(l,a)}};return c&&(i.ref=o),s.a.createElement("li",i,s.a.createElement("div",{style:{display:"flex",flexDirection:"column",padding:"5px"},className:c?"selected":""},s.a.createElement("p",{style:{fontSize:20}},e.name),s.a.createElement("p",{style:{fontSize:15,color:"".concat(c?"var(--bgColor1)":"var(--textColor2)"),alignSelf:"flex-end"}},e.address)),s.a.createElement("hr",null))}))),t},S=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(p.a)(this,Object(u.a)(t).call(this,e))).next=function(){a.state.stationSel?a.props.history.push("/Form",{station:a.state.stationSel}):w.b.info("Please select a station first",{position:"bottom-center",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})},a.select=function(e){a.setState({stationSel:e,location:{lat:e.pos.lat,long:e.pos.long}})},a.getLoc=Object(y.a)(f.a.mark((function e(){var t,n,s,r,o;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=a.state.state,n=a.state.address,e.next=5,fetch("https://nominatim.openstreetmap.org/search?format=json&limit=10&countrycodes=ng&q=".concat(n,",").concat(t),{method:"GET",headers:{Accept:"application/json, text/plain, */*","Content-Type":"application/json"}});case 5:return s=e.sent,e.next=8,s.json();case 8:return r=e.sent,e.next=11,r.map((function(e){return{name:e.display_name,pos:{lat:e.lat,long:e.lon}}}));case 11:o=e.sent,a.setState({potPlaces:o,showPotPlaces:"true"}),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(0),alert(e.t0);case 18:case"end":return e.stop()}}),e,null,[[0,15]])}))),a.getLocGmap=Object(y.a)(f.a.mark((function e(){var t,n,s,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=a.state.state,n=a.state.address,e.next=5,fetch("".concat(C.base_url,"/api/pioneer/address/").concat(n,",%20").concat(t),{method:"GET",headers:{Accept:"application/json, text/plain, */*","Content-Type":"application/json"}});case 5:return s=e.sent,e.next=8,s.json();case 8:r=e.sent,a.setState({potPlaces:r,showPotPlaces:"true"}),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),alert(e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])}))),a.get=function(){var e=Object(y.a)(f.a.mark((function e(t){var n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(C.base_url,"/api/pioneer/stations/").concat(t.lat,"-").concat(t.long),{headers:{Accept:"application/json, text/plain, */*","Content-Type":"application/json"}});case 3:return e.next=5,e.sent.json();case 5:n=e.sent,a.setState({stations:n.map((function(e){return{name:e.name,address:e.address,id:e.id,pos:{lat:e.coord.lat,long:e.coord.long},petrol:e.petrol,days_open:e.days_open,edited:e.edited||!1,openingTime:e.openingTime,closingTime:e.closingTime}})),location:{lat:t.lat,long:t.long}}),e.next=14;break;case 9:e.prev=9,e.t0=e.catch(0),alert(e.t0),w.b.error("an error occurred",{position:"bottom-center",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0}),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),a.state={windowDimensions:{width:0,height:0},stations:"",stationSel:!1,state:"Lagos",address:"",potPlaces:[],showPotPlaces:!1,location:{lat:6.4613114,long:3.2003803}},a.updateWindowDimensions=a.updateWindowDimensions.bind(Object(E.a)(a)),a.active=Object(n.createRef)(),a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidUpdate",value:function(){this.active.current&&this.active.current.scrollIntoView({behavior:"smooth",block:"start"})}},{key:"componentDidMount",value:function(){this.updateWindowDimensions(),window.addEventListener("resize",this.updateWindowDimensions);try{console.log("yay"),console.log(typeof this.props.location.state.location),"undefined"!==typeof this.props.location.state.location&&(this.get(this.props.location.state.location),console.log("yay"))}catch(e){this.get({lat:6.4597478,long:3.1989956}),console.log(e)}}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.updateWindowDimensions)}},{key:"updateWindowDimensions",value:function(){this.setState({windowDimensions:{width:window.innerWidth,height:window.innerHeight}})}},{key:"render",value:function(){var e,t=this,a=s.a.createElement("div",{className:"dropdown"},s.a.createElement("div",{className:"searchbar"},s.a.createElement("select",(e={style:{padding:"7px"},onChange:function(e){t.setState({state:e.target.value})}},Object(g.a)(e,"style",{flexGrow:1}),Object(g.a)(e,"defaultValue","Lagos"),e),O.map((function(e,t){return s.a.createElement("option",{key:t,value:e},e)}))),s.a.createElement("input",{onChange:function(e){t.setState({address:e.target.value})},style:{flexGrow:2,padding:"7px"},placeholder:"Please enter your region ex.Ipodo,Festac, Alaba"}),s.a.createElement("div",null,s.a.createElement("button",{style:{borderRadius:0,padding:"5px 5px",fontSize:"15px"},className:"wide",onClick:this.getLocGmap}," Search "))),s.a.createElement("div",{className:"dropdown-content",style:{display:"".concat(this.state.showPotPlaces?"block":"none")}},this.state.potPlaces.length>0?this.state.potPlaces.map((function(e,a){return s.a.createElement("div",{onClick:function(a){t.setState({showPotPlaces:!1}),t.get(e.pos)},key:a,style:{display:"flex",flexDirection:"column",padding:"5px"}},s.a.createElement("p",{style:{fontSize:15}},e.name))})):s.a.createElement("div",{onClick:function(){t.setState({showPotPlaces:!1})},style:{display:"flex",flexDirection:"column",padding:"5px",cursor:"pointer"}},s.a.createElement("p",{style:{fontSize:15}},"No places match that name")))),r=s.a.createElement(x,{style:"mapbox://styles/mapbox/streets-v9",containerStyle:{height:"".concat(this.state.windowDimensions.width<600?"40vh":"70vh"),width:"".concat(this.state.windowDimensions.width<600?"100%":"50vw")},center:[this.state.location.long,this.state.location.lat],zoom:[13]},""!=this.state.stations?s.a.createElement(n.Fragment,null,s.a.createElement(v.b,{type:"circle",id:"markerF",paint:{"circle-color":"#ff5200","circle-stroke-width":1,"circle-stroke-color":"#fff","circle-stroke-opacity":1}},this.state.stations.filter((function(e){return!0===!e.edited})).map((function(e,a){return s.a.createElement(v.a,{key:e.id,onClick:function(a){t.select(e)},coordinates:[e.pos.long,e.pos.lat]})}))),s.a.createElement(v.b,{type:"circle",id:"marker",paint:{"circle-color":"#2deb0c","circle-stroke-width":1,"circle-stroke-color":"#fff","circle-stroke-opacity":1}},this.state.stations.filter((function(e){return!0===e.edited})).map((function(e,a){return s.a.createElement(v.a,{key:e.id,onClick:function(a){t.select(e)},coordinates:[e.pos.long,e.pos.lat]})}))),s.a.createElement(v.b,{type:"circle",id:"Smarker",paint:{"circle-color":"rgba(34, 34, 34, 0)","circle-stroke-width":2,"circle-stroke-color":"#0c86eb","circle-stroke-opacity":1}},this.state.stationSel?s.a.createElement(v.a,{coordinates:[this.state.stationSel.pos.long,this.state.stationSel.pos.lat]}):"")):null),o=s.a.createElement("div",{className:"Slist",style:{height:"".concat(this.state.windowDimensions.width<600?"40vh":"70vh")}},s.a.createElement("h2",null,"Nearby filling stations"),s.a.createElement("hr",null),s.a.createElement("ul",null,""!=this.state.stations?s.a.createElement(j,{selectFunc:this.select,selected:this.state.stationSel,stations:this.state.stations,reff:this.active}):s.a.createElement("p",{style:{fontSize:20}},"Please choose a location to show list of available stations")));return s.a.createElement("div",{className:"main main2"},this.state.windowDimensions.width<600?s.a.createElement("div",{className:"mobileMapView"},r,a,o):s.a.createElement("div",{className:"pcMapView"},a,s.a.createElement("div",{className:"F-row"},r,o)),s.a.createElement("button",{className:this.state.stationSel?"wide":"wide disabled",onClick:this.next}," Next "),s.a.createElement(w.a,{position:"bottom-center",autoClose:5e3,hideProgressBar:!1,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0}))}}]),t}(n.Component),D=a(28),N=a.n(D),P=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(p.a)(this,Object(u.a)(t).call(this,e))).onChange=function(e,t){var n,s=e.target.type,r=e.target.name,o=e.target.value,l=a.state.errs;if("checkbox"===s){var c=a.state.DaysOpen;c[r]=e.target.checked,Object.values(c).includes(!0)?l.DaysOpen=!1:l.DaysOpen=!0,a.setState({DaysOpen:c,errs:l})}"text"!==s&&"number"!==s||(l[r]=""===o||o<1,a.setState((n={},Object(g.a)(n,r,o),Object(g.a)(n,"errs",l),n)));"timefield"===s&&alert("jhg")},a.submit=Object(y.a)(f.a.mark((function e(){var t,n,s,r,o,l,c,i;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.validate(),e.prev=1,!Object.values(a.state.errs).includes(!0)){e.next=7;break}return e.abrupt("return");case 7:return t=a.state.name,n=a.state.address,s=a.state.Opening_time,r=a.state.Closing_time,o=a.state.pumps_T,l=a.state.Fuel_price,c=a.state.DaysOpen,i=JSON.stringify({name:t,address:n,opening:s,closing:r,petrol:{price:l,pumps:o},days_open:c}),e.next=17,fetch("".concat(C.base_url,"/api/pioneer/").concat(a.props.location.state.station.id,"/"),{method:"put",headers:{Accept:"application/json, text/plain, */*","Content-Type":"application/json"},body:i});case 17:return e.next=19,e.sent.json();case 19:"success"===e.sent?a.props.history.push("Appreciation",{location:a.props.location.state.station.pos}):w.b.error("an error occurred",{position:"bottom-center",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0});case 21:e.next=27;break;case 23:e.prev=23,e.t0=e.catch(1),w.b.error("an error occurred",{position:"bottom-center",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0}),console.log(e.t0);case 27:case"end":return e.stop()}}),e,null,[[1,23]])}))),a.validate=function(){var e=a.state.name,t=a.state.address,n=a.state.pumps_T,s=a.state.Fuel_price,r=Object.values(a.state.DaysOpen).includes(!0),o=a.state.errs;""==e&&(o.name=!0),""==t&&(o.address=!0),""==n&&(o.pumps_T=!0),""==s&&(o.Fuel_price=!0),r||(o.DaysOpen=!0),a.setState({errs:o})},a.state={name:"",address:"",Opening_time:"",Closing_time:"",Fuel_price:"",pumps_T:"",DaysOpen:{Sunday:!1,Monday:!1,Tuesday:!1,Wednesday:!1,Thursday:!1,Friday:!1,Saturday:!1},errs:{name:!1,address:!1,Opening_time:!1,Closing_time:!1,Fuel_price:!1,pumps_T:!1,DaysOpen:!1},submitable:!1},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.location.state.station;console.log(e);try{this.setState({name:e.name,address:e.address,Opening_time:e.openingTime,Closing_time:e.closingTime,Fuel_price:e.petrol.price,pumps_T:e.petrol.pumpsTotal,DaysOpen:e.days_open})}catch(t){alert(t)}}},{key:"render",value:function(){return s.a.createElement("form",{className:"main",onSubmit:function(e){return e.preventDefault(),!1}},s.a.createElement("h1",null,"Station Details"),s.a.createElement("hr",null),s.a.createElement("h3",null,"Please help us fill this form"),s.a.createElement("br",null),s.a.createElement("br",null),s.a.createElement("label",null,"Name"),s.a.createElement("input",{name:"name",type:"text",defaultValue:this.state.name,onChange:this.onChange,className:this.state.errs.name?"err":""}),s.a.createElement("p",{className:this.state.errs.name?"err":"noErr"},"Please enter the name of the station"),s.a.createElement("br",null),s.a.createElement("label",null,"Address"),s.a.createElement("input",{name:"address",type:"text",defaultValue:this.state.address,onChange:this.onChange,className:this.state.errs.address?"err":""}),s.a.createElement("p",{className:this.state.errs.address?"err":"noErr"},"Please the address of the station"),s.a.createElement("br",null),s.a.createElement("label",null,"Fuel Price"),s.a.createElement("input",{name:"Fuel_price",type:"number",min:"0",defaultValue:this.state.Fuel_price,onChange:this.onChange}),s.a.createElement("p",{className:this.state.errs.Fuel_price?"err":"noErr"},"Please enter the number of pumps in the station"),s.a.createElement("br",null),s.a.createElement("label",null,"Opening time"),s.a.createElement(N.a,{name:"Opening_time",type:"timefield",value:this.state.Opening_time,input:s.a.createElement("input",null),onChange:this.onChange,colon:":",showSeconds:!1}),s.a.createElement("br",null),s.a.createElement("label",null,"Closing time"),s.a.createElement(N.a,{name:"Closing_time",type:"timefield",value:this.state.Closing_time,input:s.a.createElement("input",null),onChange:this.onChange,colon:":",showSeconds:!1}),s.a.createElement("br",null),s.a.createElement("label",null,"Number of pumps"),s.a.createElement("input",{name:"pumps_T",type:"number",min:"0",defaultValue:this.state.pumps_T,onChange:this.onChange}),s.a.createElement("p",{className:this.state.errs.pumps_T?"err":"noErr"},"Please enter the number of pumps in the station"),s.a.createElement("br",null),s.a.createElement("label",null,"Days Open"),s.a.createElement("p",{className:this.state.errs.DaysOpen?"err":"noErr"},"Please select open days"),s.a.createElement("div",{className:"F row j-start"},s.a.createElement("input",{type:"checkbox",name:"Sunday",defaultChecked:this.state.DaysOpen.Sunday,onChange:this.onChange}),s.a.createElement("label",null,"Sunday")),s.a.createElement("div",{className:"F row j-start"},s.a.createElement("input",{type:"checkbox",name:"Monday",defaultChecked:this.state.DaysOpen.Monday,onChange:this.onChange}),s.a.createElement("label",null,"Monday")),s.a.createElement("div",{className:"F row j-start"},s.a.createElement("input",{type:"checkbox",name:"Tuesday",defaultChecked:this.state.DaysOpen.Tuesday,onChange:this.onChange}),s.a.createElement("label",null,"Tuesday")),s.a.createElement("div",{className:"F row j-start"},s.a.createElement("input",{type:"checkbox",name:"Wednesday",defaultChecked:this.state.DaysOpen.Wednesday,onChange:this.onChange}),s.a.createElement("label",null,"Wednesday")),s.a.createElement("div",{className:"F row j-start"},s.a.createElement("input",{type:"checkbox",name:"Thursday",defaultChecked:this.state.DaysOpen.Thursday,onChange:this.onChange}),s.a.createElement("label",null,"Thursday")),s.a.createElement("div",{className:"F row j-start"},s.a.createElement("input",{type:"checkbox",name:"Friday",defaultChecked:this.state.DaysOpen.Friday,onChange:this.onChange}),s.a.createElement("label",null,"Friday")),s.a.createElement("div",{className:"F row j-start"},s.a.createElement("input",{type:"checkbox",name:"Saturday",defaultChecked:this.state.DaysOpen.Saturday,onChange:this.onChange}),s.a.createElement("label",null,"Saturday")),s.a.createElement("button",{onClick:this.submit},"Submit"),s.a.createElement(w.a,{position:"bottom-center",autoClose:5e3,hideProgressBar:!1,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0}))}}]),t}(n.Component),T=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(p.a)(this,Object(u.a)(t).call(this,e))).next=function(){a.props.history.push("/ff-survey/Select",{location:a.props.location.state.location})},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){console.log(this.props.location.state.location)}},{key:"render",value:function(){return s.a.createElement("div",{className:"main"},s.a.createElement("h2",null," Thank you"),s.a.createElement("p",null,"Thank you for your help"),s.a.createElement("p",null,"It is highly appreciated"),s.a.createElement("a",{onClick:this.next},s.a.createElement("p",{className:"link"},"Please click here if you would like to add another station.")))}}]),t}(n.Component);console.log("/ff-survey");var _=function(e){function t(){return Object(c.a)(this,t),Object(p.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return s.a.createElement(d.c,null,s.a.createElement(d.a,{path:"/ff-survey",component:b,exact:!0}),s.a.createElement(d.a,{path:"/ff-survey/Intro",component:b}),s.a.createElement(d.a,{path:"/ff-survey/Select",component:S}),s.a.createElement(d.a,{path:"/ff-survey/Form",component:P})," ",s.a.createElement(d.a,{path:"Appreciation",component:T}))}}]),t}(n.Component);o.a.render(s.a.createElement(l.a,null," ",s.a.createElement(_,null)," "),document.getElementById("root"))}},[[36,1,2]]]);
//# sourceMappingURL=main.f03e0fdf.chunk.js.map